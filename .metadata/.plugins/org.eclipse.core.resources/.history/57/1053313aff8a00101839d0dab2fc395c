package TEST;

import java.util.Scanner;

import IMPL.AccountDaoImpl;
import IMPL.CustomerDaoImpl;
import POJO.Account;
import POJO.Customer;
import UTILITY.AccountNumberGenerator;

public class CustomerTest {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner sc= new Scanner(System.in);
		
		 String name;
	     String email;
	     String password;
	     String phone;
	     boolean flag;
	     CustomerDaoImpl cimpl=new CustomerDaoImpl();
	     AccountDaoImpl aimpl = new AccountDaoImpl();
		System.out.println("========= Bank Management ========");
		System.out.println("1. Register \n2. Login");
		
		int choice =sc.nextInt();
		sc.nextLine();
		
		switch(choice)
		{
		case 1:
		{
			System.out.println("Enter Your Name");
			name=sc.nextLine();
			System.out.println("Enter Email");
			email=sc.nextLine();
			System.out.println("Enter Your Password");
			password=sc.nextLine();
			
			System.out.println("Enter Your PhoneNo");
			phone=sc.next();
			Customer customer=new Customer(name,email,password,phone);
			flag=cimpl.registerCustomer(customer);
			
			if(flag==true)
			{
				System.out.println("Register Successfully ");
			}
			else
			{
				System.out.println("please try again");
			}
			
			
		}
		case 2:
		{
			System.out.println("Enter Your Email");
			email=sc.next();
			
			System.out.println("Enter your password");
			password=sc.next();
			
	        Customer loggedInCustomer = cimpl.login(email, password);
			if(loggedInCustomer!=null)
			{
				System.out.println("========== WELCOME "+loggedInCustomer.getName()+" ===========");
				System.out.println("1.Open Account\n2. Deposit Money\n3.Withdraw Money\n4.Chech Balance\n5.View Transaction\n6.Logout");
				int choice2 =sc.nextInt();
				
				
				switch(choice2)
				{
				case 1:
				{
					int customerId = loggedInCustomer.get();

					System.out.println("Enter Account Type (SAVINGS/CURRENT): ");
					String accountType = sc.next();

					System.out.println("Enter Initial Deposit Amount: ");
					double balance = sc.nextDouble();
					
					String accountNumber = AccountNumberGenerator.generateAccountNumber();
					
					Account account=new Account(accountType,balance,accountNumber);
					flag=aimpl.createAccount(account);

				}
				}
				
				
				
								
				
				
				
				
				
			}
			else
			{
				System.out.println("please try again");
			}

			
		}
		}

	}

}
